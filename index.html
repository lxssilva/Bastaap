<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basta Inteligente</title>
    <style>
        /* ESTILOS (Mismo dise√±o elegante oscuro) */
        body { font-family: 'Segoe UI', sans-serif; background-color: #212529; text-align: center; padding: 15px; color: #f8f9fa; margin: 0; }
        h1 { color: #ffc107; margin: 10px 0; font-size: 1.5rem; text-transform: uppercase; letter-spacing: 2px;}
        
        .card { background: #343a40; padding: 20px; border-radius: 15px; max-width: 500px; margin: 10px auto; border: 1px solid #495057; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        
        button.main-btn { background-color: #0d6efd; color: white; border: none; padding: 15px 30px; font-size: 18px; font-weight: bold; border-radius: 50px; cursor: pointer; width: 100%; margin-top: 10px; box-shadow: 0 5px 0 #0a58ca; transition: all 0.1s; }
        button.main-btn:active { transform: translateY(5px); box-shadow: none; }
        
        button.small-btn { background-color: #6c757d; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 5px; }
        input[type="text"] { padding: 12px; border-radius: 8px; border: none; width: 70%; font-size: 16px; text-align: center; margin-bottom: 10px; }

        #category-box { background: #e9ecef; color: #212529; padding: 30px 20px; border-radius: 12px; margin: 20px 0; min-height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 4px solid #ffc107; }
        #topic-main { font-size: 2em; font-weight: 800; line-height: 1.1; margin-bottom: 10px; }
        #topic-sub { font-size: 1.2em; color: #d63384; font-weight: bold; font-style: italic; }
        
        .player-row { display: flex; justify-content: space-between; align-items: center; background: #495057; padding: 10px 15px; margin-bottom: 8px; border-radius: 8px; border-left: 5px solid #ffc107; }
        .score-box { display: flex; align-items: center; gap: 10px; }
        .score-num { font-size: 1.5em; font-weight: bold; color: #ffc107; width: 30px; text-align: center;}
        .btn-point { background: #198754; color: white; border: none; width: 35px; height: 35px; border-radius: 50%; font-size: 18px; font-weight: bold; cursor: pointer; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <h1>üß† Generador Inteligente</h1>

    <div id="setup-screen" class="card">
        <h3>Jugadores</h3>
        <input type="text" id="new-player-name" placeholder="Nombre..." autocomplete="off">
        <button class="small-btn" onclick="addPlayer()">Agregar</button>
        <div id="setup-list" style="margin-top:15px; text-align: left; color: #adb5bd;"></div>
        <br>
        <button class="main-btn" onclick="startGame()">¬°JUGAR!</button>
    </div>

    <div id="game-screen" class="card hidden">
        <div style="display:flex; justify-content:space-between; color:#adb5bd; font-size:0.9em;">
            <span id="round-counter">RONDA 0</span>
            <span onclick="resetGame()" style="cursor:pointer; text-decoration:underline;">Salir</span>
        </div>
        
        <div id="category-box">
            <div id="topic-main">Presiona el bot√≥n</div>
            <div id="topic-sub">para categor√≠a l√≥gica</div>
        </div>
        
        <button class="main-btn" onclick="generateCategory()">üé≤ NUEVA CATEGOR√çA</button>
        <hr style="border-color: #495057; margin: 25px 0;">
        <div id="players-container"></div>
    </div>

    <div id="winner-message" class="card hidden" style="background: #198754; border:none;">
        <h1>üèÜ ¬°GANADOR! üèÜ</h1>
        <h2 id="winner-text" style="font-size: 2.5em; margin: 30px 0;"></h2>
        <button class="main-btn" style="background: white; color: #198754;" onclick="resetGame()">Nueva Partida</button>
    </div>

    <script>
        /* L√ìGICA INTELIGENTE:
           type: 'physical' = Cosas que se tocan, huelen, ocupan espacio.
           type: 'abstract' = Conceptos, nombres, digital.
        */

        const subjects = [
            // F√çSICOS
            { text: "Un Animal", type: "physical" },
            { text: "Una Comida", type: "physical" },
            { text: "Una Ropa", type: "physical" },
            { text: "Un Lugar", type: "physical" },
            { text: "Un Objeto", type: "physical" },
            { text: "Un Regalo", type: "physical" },
            { text: "Un Veh√≠culo", type: "physical" },
            { text: "Fruta o Verdura", type: "physical" },
            { text: "Parte del cuerpo", type: "physical" },
            { text: "Cosa de cocina", type: "physical" },

            // ABSTRACTOS O INTANGIBLES
            { text: "Una Canci√≥n", type: "abstract" },
            { text: "Una Pel√≠cula", type: "abstract" },
            { text: "Una Excusa", type: "abstract" },
            { text: "Un Insulto", type: "abstract" },
            { text: "Una Mentira", type: "abstract" },
            { text: "Una App de celular", type: "abstract" },
            { text: "Un Miedo o Fobia", type: "abstract" },
            { text: "Una Profesi√≥n", type: "abstract" },
            { text: "Un Verbo / Acci√≥n", type: "abstract" },
            
            // PERSONAS (Son f√≠sicas, pero funcionan diferente, las trataremos como f√≠sicas para simplificar)
            { text: "Famoso/a", type: "physical" },
            { text: "Villano de cine", type: "physical" }
        ];

        /*
           reqPhysical: true  -> Solo sale con cosas f√≠sicas (olor, tacto, ubicaci√≥n).
           reqPhysical: false -> Sale con CUALQUIER COSA (precio, legalidad, gusto).
        */
        const conditions = [
            // Requieren ser f√≠sico
            { text: "que huela muy mal", reqPhysical: true },
            { text: "que encuentres en la basura", reqPhysical: true },
            { text: "que sea pegajoso/a", reqPhysical: true },
            { text: "que quepa en tu bolsillo", reqPhysical: true },
            { text: "que encuentres en un hospital", reqPhysical: true },
            { text: "que flote en el agua", reqPhysical: true },
            { text: "que se coma con cuchara", reqPhysical: true },
            { text: "que sea peludo/a", reqPhysical: true },
            { text: "que sea muy pesado/a", reqPhysical: true },
            { text: "que haga ruido al caer", reqPhysical: true },

            // Universales (Funcionan con Apps, Canciones, Objetos...)
            { text: "que le regalar√≠as a tu ex", reqPhysical: false },
            { text: "que cueste una fortuna", reqPhysical: false },
            { text: "√∫til en un apocalipsis", reqPhysical: false },
            { text: "que te de verg√ºenza admitir", reqPhysical: false },
            { text: "que sea ilegal", reqPhysical: false },
            { text: "para conquistar a alguien", reqPhysical: false },
            { text: "que usas cuando est√°s triste", reqPhysical: false },
            { text: "que empiece con la letra de la ronda", reqPhysical: false },
            { text: "que odies", reqPhysical: false },
            { text: "que te haga re√≠r", reqPhysical: false },
            { text: "muy popular en los 90s", reqPhysical: false }
        ];

        let players = [];
        let round = 0;
        const winningScore = 5;

        // --- FUNCIONES ---

        function generateCategory() {
            round++;
            document.getElementById('round-counter').innerText = "RONDA " + round;
            
            // Efecto visual
            document.getElementById('topic-main').innerText = "...";
            document.getElementById('topic-sub').innerText = "";

            setTimeout(() => {
                // 1. Elegir un Sujeto al azar
                const subj = subjects[Math.floor(Math.random() * subjects.length)];
                
                // 2. FILTRAR las condiciones
                // Si el sujeto es "abstracto" (ej: App), filtramos para eliminar las que requieren f√≠sico.
                const validConditions = conditions.filter(cond => {
                    if (subj.type === 'abstract') {
                        // Si es abstracto, solo permitimos las que NO requieren f√≠sico
                        return cond.reqPhysical === false;
                    }
                    // Si es f√≠sico, permitimos TODO (porque un animal puede "costar una fortuna")
                    return true;
                });

                // 3. Elegir una condici√≥n de la lista filtrada
                const cond = validConditions[Math.floor(Math.random() * validConditions.length)];
                
                document.getElementById('topic-main').innerText = subj.text;
                document.getElementById('topic-sub').innerText = cond.text;
            }, 100);
        }

        function addPlayer() {
            const input = document.getElementById('new-player-name');
            const name = input.value.trim();
            if (name) {
                players.push({ name: name, score: 0 });
                renderSetupList();
                input.value = '';
                input.focus();
            }
        }

        function renderSetupList() {
            document.getElementById('setup-list').innerHTML = players.map(p => `<div>‚úÖ ${p.name}</div>`).join('');
        }

        function startGame() {
            if (players.length < 1) { alert("¬°Faltan jugadores!"); return; }
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            renderScoreboard();
        }

        function givePoint(index) {
            players[index].score++;
            if (players[index].score >= winningScore) {
                endGame(players[index].name);
            } else {
                renderScoreboard();
            }
        }

        function renderScoreboard() {
            const container = document.getElementById('players-container');
            container.innerHTML = '';
            
            players.forEach((player, index) => {
                const div = document.createElement('div');
                div.className = 'player-row';
                div.innerHTML = `
                    <span style="font-weight:bold; font-size:1.1em">${player.name}</span>
                    <div class="score-box">
                        <span class="score-num">${player.score}</span>
                        <button class="btn-point" onclick="givePoint(${index})">+</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function endGame(winnerName) {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('winner-message').classList.remove('hidden');
            document.getElementById('winner-text').innerText = winnerName;
        }

        function resetGame() {
            players = [];
            round = 0;
            renderSetupList();
            document.getElementById('winner-message').classList.add('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('setup-screen').classList.remove('hidden');
            document.getElementById('topic-main').innerText = "Presiona el bot√≥n";
            document.getElementById('topic-sub').innerText = "para categor√≠a l√≥gica";
        }

        document.getElementById("new-player-name").addEventListener("keypress", function(e) {
            if (e.key === "Enter") addPlayer();
        });
    </script>
</body>
</html>
